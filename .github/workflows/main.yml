name: Main Configuration file for orchestration of pipeline

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  Build-And-Publish:
    uses: ts-software-solutions/mule-sample-project/.github/workflows/build.yml@main
    secrets: inherit
  

  # Deploy-to-Dev:
  #   needs: Build-And-Publish
  #   uses: ts-software-solutions/mule-sample-project/.github/workflows/deploy-to-dev.yml@main
  #   secrets: inherit

  Prod-Deployment-Cleanup:
    needs: Build-And-Publish
    uses: ts-software-solutions/mule-sample-project/.github/workflows/post-deployment-tasks.yml@main 
    with:
      tag-version: ${{ needs.Build-And-Publish.outputs.app-version }}